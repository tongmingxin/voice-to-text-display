<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="description" content="语音转大字显示 - 听障沟通辅助工具">
  <title>语音转大字</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎤</text></svg>">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- 竖屏操作模式 -->
  <div id="portraitMode" class="mode portrait-mode">
    <div class="portrait-header">
      <h1 class="app-title">语音转大字</h1>
      <p class="app-subtitle">听障沟通辅助工具</p>
    </div>

    <div class="portrait-center">
      <div class="lang-switch" id="portraitLangSwitch">
        <button class="lang-btn active" data-lang="zh-CN">普通话</button>
        <button class="lang-btn" data-lang="zh-HK">粤语</button>
      </div>

      <button id="portraitTalkBtn" class="talk-btn talk-btn-large">
        <svg class="mic-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
          <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
        </svg>
        <span class="btn-text">长按说话</span>
      </button>

      <p class="hint-text">长按上方按钮，对准手机说话<br>松开后将自动横屏显示大字</p>
    </div>

    <div class="portrait-footer">
      <p class="footer-note">支持普通话和粤语 · 需要联网使用</p>
    </div>
  </div>

  <!-- 横屏展示模式 -->
  <div id="landscapeMode" class="mode landscape-mode hidden">
    <!-- 顶部工具栏 -->
    <div id="toolbar" class="toolbar">
      <div class="toolbar-left">
        <button id="exitBtn" class="tool-btn">
          <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
          <span>退出</span>
        </button>
        <button id="clearBtn" class="tool-btn">
          <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
          </svg>
          <span>清空</span>
        </button>
      </div>
      <div class="toolbar-right">
        <div class="lang-switch" id="landscapeLangSwitch">
          <button class="lang-btn active" data-lang="zh-CN">普通话</button>
          <button class="lang-btn" data-lang="zh-HK">粤语</button>
        </div>
      </div>
    </div>

    <!-- 大字显示区 -->
    <div id="textDisplay" class="text-display">
      <div id="textContent" class="text-content">
        <p class="placeholder-text">等待语音输入...</p>
      </div>
    </div>

    <!-- 底部常驻按钮 -->
    <div class="landscape-bottom">
      <button id="landscapeTalkBtn" class="talk-btn talk-btn-landscape">
        <svg class="mic-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
          <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
        </svg>
        <span class="btn-text">长按说话</span>
      </button>
    </div>

    <!-- 录音状态指示 -->
    <div id="recordingOverlay" class="recording-overlay hidden">
      <div class="recording-indicator">
        <div class="pulse-ring"></div>
        <div class="pulse-ring delay-1"></div>
        <div class="pulse-ring delay-2"></div>
        <svg class="mic-icon-large" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
          <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
        </svg>
      </div>
      <p class="recording-text">正在聆听...</p>
    </div>
  </div>

  <!-- 浏览器不支持提示 -->
  <div id="unsupportedModal" class="modal hidden">
    <div class="modal-content">
      <h2>浏览器不支持</h2>
      <p>您的浏览器不支持语音识别功能。</p>
      <p>请使用以下浏览器：</p>
      <ul>
        <li>Android 手机：Chrome 浏览器</li>
        <li>iPhone/iPad：Safari 浏览器</li>
        <li>电脑：Chrome 浏览器</li>
      </ul>
      <button class="modal-close-btn" onclick="this.closest('.modal').classList.add('hidden')">我知道了</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
